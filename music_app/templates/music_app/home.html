{% load static %}
{% extends 'base.html' %}

{% block content %}
<div class="album-list">
  {% for album in albums %}
    <div class="album-card" onclick="toggleAlbum('{{ forloop.counter0 }}')">
      <img src="{% static album.cover %}" alt="{{ album.title }} cover" class="album-cover">
      <div class="album-info">
        <h2>{{ album.title }}</h2>
        <p>{{ album.artist }}</p>
      </div>
    </div>

    <div id="album-details-{{ forloop.counter0 }}" class="album-details hidden">
      <p class="album-description">{{ album.description }}</p>
      <ul class="tracklist">
        {% for track in album.tracks %}
          <li onclick="playTrack('{{ track.title }}', '{{ track.artist }}', '{% static track.url %}', '{% static album.cover %}')">
            <span class="track-title">{{ track.title }}</span>
            <span class="track-duration">{{ track.duration }}</span>
          </li>
        {% endfor %}
      </ul>
    </div>
  {% endfor %}
</div>

<div id="player" class="music-player hidden">
  <img id="player-cover" src="" class="player-cover" alt="cover">
  <div class="player-info">
    <h3 id="player-title">Title</h3>
    <p id="player-artist">Artist</p>
  </div>
  <audio id="audio" controls autoplay></audio>
  <button onclick="closePlayer()">Close</button>
</div>

<script src="{% static 'music_app/js/player.js' %}"></script>
{% endblock %}

